<!DOCTYPE html>
<html lang="en">
  <head>
    <title>UNSTOPPABLES CC</title>
    <link rel="shortcut icon" href="../static/images/logofull.png" type="image/x-icon">
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Mukta:300,400,700"> 
    <link rel="stylesheet" href="../static/fonts/icomoon/style.css">
    <link rel="stylesheet" href="../static/css/bootstrap.min.css">
    <link rel="stylesheet" href="../static/css/magnific-popup.css">
    <link rel="stylesheet" href="../static/css/jquery-ui.css">
    <link rel="stylesheet" href="../static/css/owl.carousel.min.css">
    <link rel="stylesheet" href="../static/css/owl.theme.default.min.css">
    <link rel="stylesheet" href="../static/css/aos.css">
    <link rel="stylesheet" href="../static/css/style.css">
    
  </head>
  <body>

<!-- Preloader -->
    <div id="preloader" style="background: #000; position: fixed; top: 0; left: 0; width: 100vw; height: 100vh; z-index: 9999; display: flex; align-items: center; justify-content: center;">
      <img src="../static/images/unstoppables-logo.gif" alt="UNSTOPPABLES CC Logo" />
    </div>

  
  <div class="site-wrap">

    <div class="site-mobile-menu">
      <div class="site-mobile-menu-header">
        <div class="site-mobile-menu-logo">
            <a href="#"><img src="../static/images/logofull.png" alt="Image"></a>
        </div>
        <div class="site-mobile-menu-close mt-3">
          <span class="icon-close2 js-menu-toggle"></span>
        </div>
      </div>
      <div class="site-mobile-menu-body"></div>
    </div>

    <header class="site-navbar absolute transparent" role="banner">
      
      <nav class="site-navigation position-relative text-right bg-black text-md-right" role="navigation">
        <div class="container position-relative">
          <div class="site-logo">
            <a href="/"><img src="../static/images/logo.png" alt=""></a>
          </div>

          <div class="d-inline-block d-md-none ml-md-0 mr-auto py-3"><a href="#" class="site-menu-toggle js-menu-toggle text-white"><span class="icon-menu h3"></span></a></div>

          <ul class="site-menu js-clone-nav d-none d-md-block">
            <li class="active"><a href="index.html">HOME</a></li>
            <li><a href="squad">SQUAD</a></li>
            <li><a href="gallery">GALLERY</a></li>
            <li><a href="matches">MATCHES</a></li>
            <li><a href="about">ABOUT</a></li>
            <li><a href="contact">CONTACT</a></li>
          </ul>
        </div>
      </nav>
    </header>
    


    <div class="slide-one-item home-slider owl-carousel">

      <div class="site-blocks-cover overlay" style="background-image: url(../static/images/CricketTour1.jpg);" data-aos="fade" data-stellar-background-ratio="0.5">
        <div class="container">
          <div class="row align-items-center justify-content-start">
            <div class="col-md-6 text-center text-md-left" data-aos="fade-up" data-aos-delay="400">
              <h1 class="bg-text-line">Unstoppables CC Presents Cricket Tournament Season-3 : Winner</h1>
            </div>
          </div>
        </div>
      </div>  

      <div class="site-blocks-cover overlay" style="background-image: url(../static/images/CricketTour2.jpg);" data-aos="fade" data-stellar-background-ratio="0.5">
        <div class="container">
          <div class="row align-items-center justify-content-start">
            <div class="col-md-6 text-center text-md-left" data-aos="fade-up" data-aos-delay="400">
              <h1 class="bg-text-line">King Maker CC Presents Cricket Tournament Season-2 : Runner Up</h1>
            </div>
          </div>
        </div>
      </div>  

      <div class="site-blocks-cover overlay" style="background-image: url(../static/images/CricketTour3.jpg);" data-aos="fade" data-stellar-background-ratio="0.5">
        <div class="container">
          <div class="row align-items-center justify-content-start">
            <div class="col-md-6 text-center text-md-left" data-aos="fade-up" data-aos-delay="400">
              <h1 class="bg-text-line">Unstoppables CC Presents Cricket Tournament Season-1 : Runner Up</h1>
            </div>
          </div>
        </div>
      </div>  
    </div>
    

    <div class="site-section pt-0 feature-blocks-1" data-aos="fade" data-aos-delay="100">
      <div class="container">
        <div class="row">
          <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
            <div class="p-3 p-md-5 feature-block-1 bg d-flex align-items-end" style="background-image: url('../static/images/CricketTour1.jpg'); min-height: 250px; background-size: cover; background-position: center; border-radius: 12px;">
              <div class="text w-100" style="background: rgba(0,0,0,0.5); border-radius: 8px; padding: 10px;">
                <h2 class="h5 text-white mb-0">Unstoppables CC Presents Cricket Tournament Season-3 : Winner</h2>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
            <div class="p-3 p-md-5 feature-block-1 bg d-flex align-items-end" style="background-image: url('../static/images/CricketTour2.jpg'); min-height: 250px; background-size: cover; background-position: center; border-radius: 12px;">
              <div class="text w-100" style="background: rgba(0,0,0,0.5); border-radius: 8px; padding: 10px;">
                <h2 class="h5 text-white mb-0">King Maker CC Presents Cricket Tournament Season-2 : Runner Up</h2>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
            <div class="p-3 p-md-5 feature-block-1 bg d-flex align-items-end" style="background-image: url('../static/images/CricketTour3.jpg'); min-height: 250px; background-size: cover; background-position: center; border-radius: 12px;">
              <div class="text w-100" style="background: rgba(0,0,0,0.5); border-radius: 8px; padding: 10px;">
                <h2 class="h5 text-white mb-0">Unstoppables CC Presents Cricket Tournament Season-1 : Runner Up</h2>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <style>
    @media (max-width: 767.98px) {
      .feature-block-1 {
        min-height: 180px !important;
        padding: 1.5rem !important;
      }
      .feature-block-1 .text h2 {
        font-size: 1rem !important;
      }
    }
    </style>

    </div>
    <!-- Automated Player Ranking System -->
    <div class="container my-5">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <h2 class="text-center mb-4">Player Rankings</h2>
          <div class="table-responsive">
            <table class="table table-striped table-bordered text-center">
              <thead class="thead-dark">
                <tr>
                  <th>Rank</th>
                  <th>Player</th>
                  <th>Matches</th>
                  <th>Runs</th>
                  <th>Wickets</th>
                  <th>Fielding</th>
                </tr>
              </thead>
              <tbody id="player-ranking-body">
                <!-- Rankings will be populated by JS -->
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>

    <!-- Performance Analytics Dashboards -->
    <div class="container my-5">
      <div class="row justify-content-center">
        <div class="col-lg-10">
          <h2 class="text-center mb-4">Performance Analytics</h2>
          <div class="row">
            <div class="col-md-6 mb-4">
              <div class="card h-100">
                <div class="card-header bg-info text-white">
                  <strong>Top Run Scorers</strong>
                </div>
                <div class="card-body">
                  <canvas id="runsChart" height="200"></canvas>
                </div>
              </div>
            </div>
            <div class="col-md-6 mb-4">
              <div class="card h-100">
                <div class="card-header bg-warning text-white">
                  <strong>Top Wicket Takers</strong>
                </div>
                <div class="card-body">
                  <canvas id="wicketsChart" height="200"></canvas>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Chart.js CDN -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
    // Fetch live player data from backend API
    let players = [];
    fetch('/api/player-stats')
      .then(response => response.json())
      .then(data => {
      players = data;
      // The rest of the code (ranking, charts, etc.) should be inside this .then block or in a function called here
      // Calculate points (simple formula: runs + 20*wickets)
      players.forEach(p => p.points = p.runs + p.wickets * 20);

      // Sort by points descending
      const ranked = [...players].sort((a, b) => b.points - a.points);

      // Populate ranking table
      const tbody = document.getElementById('player-ranking-body');
      tbody.innerHTML = '';
      ranked.forEach((p, i) => {
        const tr = document.createElement('tr');
        tr.innerHTML = `
        <td>${i + 1}</td>
        <td>${p.name}</td>
        <td>${p.matches}</td>
        <td>${p.runs}</td>
        <td>${p.wickets}</td>
        <td><strong>${p.points}</strong></td>
        `;
        tbody.appendChild(tr);
      });

      // Analytics: Top 5 run scorers
      const topRuns = [...players].sort((a, b) => b.runs - a.runs).slice(0, 5);
      const runsCtx = document.getElementById('runsChart').getContext('2d');
      new Chart(runsCtx, {
        type: 'bar',
        data: {
        labels: topRuns.map(p => p.name),
        datasets: [{
          label: 'Runs',
          data: topRuns.map(p => p.runs),
          backgroundColor: '#17a2b8'
        }]
        },
        options: {
        responsive: true,
        plugins: { legend: { display: false } }
        }
      });

      // Analytics: Top 5 wicket takers
      const topWickets = [...players].sort((a, b) => b.wickets - a.wickets).slice(0, 5);
      const wicketsCtx = document.getElementById('wicketsChart').getContext('2d');
      new Chart(wicketsCtx, {
        type: 'bar',
        data: {
        labels: topWickets.map(p => p.name),
        datasets: [{
          label: 'Wickets',
          data: topWickets.map(p => p.wickets),
          backgroundColor: '#ffc107'
        }]
        },
        options: {
        responsive: true,
        plugins: { legend: { display: false } }
        }
      });
      })
      .catch(err => {
      console.error('Failed to fetch player stats:', err);
      });

    // (Removed duplicate code: all player ranking and chart rendering is handled inside the fetch .then block above)
    </script>
    <div class="container my-5">
      <div class="row justify-content-center">
        <div class="col-lg-8">
          <h2 class="text-center mb-4">Live Scores &amp; Upcoming Matches</h2>
          <!-- Live Scores Section -->
          <div class="card mb-4">
            <div class="card-header bg-success text-white">
              <strong>Live Match</strong>
            </div>
            <div class="card-body" id="live-match-section">
              <div class="d-flex justify-content-center">
                <span class="text-muted">Loading live match...</span>
              </div>
            </div>
          </div>
          <!-- Upcoming Matches Section -->
          <div class="card mb-4">
            <div class="card-header bg-primary text-white">
              <strong>Upcoming Matches</strong>
            </div>
            <ul class="list-group list-group-flush" id="upcoming-matches-list">
              <li class="list-group-item text-center text-muted">Loading...</li>
            </ul>
          </div>
          <!-- Match Creation & Scheduling -->
          <div class="card mb-4">
            <div class="card-header bg-dark text-white">
              <strong>Schedule a New Match</strong>
            </div>
            <div class="card-body">
              <form id="match-form" class="row g-2">
                <div class="col-md-5 mb-2">
                  <input type="text" class="form-control" id="teamA" placeholder="Team A" required>
                </div>
                <div class="col-md-2 text-center mb-2">
                  <span>vs</span>
                </div>
                <div class="col-md-5 mb-2">
                  <input type="text" class="form-control" id="teamB" placeholder="Team B" required>
                </div>
                <div class="col-md-6 mb-2">
                  <input type="date" class="form-control" id="matchDate" required>
                </div>
                <div class="col-md-6 mb-2">
                  <input type="time" class="form-control" id="matchTime" required>
                </div>
                <div class="col-12 text-center">
                  <button type="submit" class="btn btn-success">Add Match</button>
                </div>
              </form>
            </div>
          </div>
          <!-- Match History -->
          <div class="card mb-4">
            <div class="card-header bg-secondary text-white">
              <strong>Match History</strong>
            </div>
            <ul class="list-group list-group-flush" id="match-history-list">
              <li class="list-group-item text-center text-muted">Loading...</li>
            </ul>
          </div>
          <!-- Team Calendar & Notifications -->
          <div class="card">
            <div class="card-header bg-info text-white">
              <strong>Team Calendar &amp; Notifications</strong>
            </div>
            <div class="card-body">
              <div id="calendar" class="mb-3"></div>
              <div id="notifications" class="alert alert-warning" style="display:none;"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
    // Fetch live match data
    function fetchLiveMatch() {
      fetch('/api/live-match')
        .then(res => res.json())
        .then(data => {
          const section = document.getElementById('live-match-section');
          if (data && data.teamA && data.teamB) {
            section.innerHTML = `
              <div class="d-flex justify-content-between align-items-center mb-2">
                <span><strong>${data.teamA}</strong></span>
                <span class="h5 mb-0" id="live-score">${data.scoreA || '--'}</span>
              </div>
              <div class="d-flex justify-content-between align-items-center">
                <span><strong>${data.teamB}</strong></span>
                <span class="h5 mb-0">${data.scoreB || '--'}</span>
              </div>
              <div class="mt-2">
                <small class="text-muted" id="live-status">${data.status || ''}</small>
              </div>
            `;
          } else {
            section.innerHTML = `<div class="text-center text-muted">No live match at the moment.</div>`;
          }
        })
        .catch(() => {
          document.getElementById('live-match-section').innerHTML = `<div class="text-center text-muted">Unable to load live match.</div>`;
        });
    }
    fetchLiveMatch();
    setInterval(fetchLiveMatch, 10000); // Refresh every 10s

    // Fetch upcoming matches
    function fetchUpcomingMatches() {
      fetch('/api/upcoming-matches')
        .then(res => res.json())
        .then(matches => {
          const list = document.getElementById('upcoming-matches-list');
          list.innerHTML = '';
          if (matches.length === 0) {
            list.innerHTML = `<li class="list-group-item text-center text-muted">No upcoming matches.</li>`;
          } else {
            matches.forEach(match => {
              const li = document.createElement('li');
              li.className = "list-group-item d-flex justify-content-between align-items-center";
              li.innerHTML = `<span>${match.teamA} vs ${match.teamB}</span>
                <span class="badge badge-info badge-pill">${new Date(match.date + 'T' + match.time).toLocaleString([], { dateStyle: 'medium', timeStyle: 'short' })}</span>`;
              list.appendChild(li);
            });
          }
          renderCalendar(matches);
        })
        .catch(() => {
          document.getElementById('upcoming-matches-list').innerHTML = `<li class="list-group-item text-center text-muted">Unable to load upcoming matches.</li>`;
        });
    }
    fetchUpcomingMatches();

    // Fetch match history
    function fetchMatchHistory() {
      fetch('/api/match-history')
        .then(res => res.json())
        .then(history => {
          const list = document.getElementById('match-history-list');
          list.innerHTML = '';
          if (history.length === 0) {
            list.innerHTML = `<li class="list-group-item text-center text-muted">No match history.</li>`;
          } else {
            history.forEach(match => {
              const li = document.createElement('li');
              li.className = "list-group-item";
              li.innerHTML = `<strong>${match.teamA} vs ${match.teamB}</strong> <br>
                <small>${new Date(match.date).toLocaleDateString()} - ${match.result}</small>`;
              list.appendChild(li);
            });
          }
        })
        .catch(() => {
          document.getElementById('match-history-list').innerHTML = `<li class="list-group-item text-center text-muted">Unable to load match history.</li>`;
        });
    }
    fetchMatchHistory();

    // Match creation form (adds to backend and refreshes upcoming matches)
    document.getElementById('match-form').addEventListener('submit', function(e) {
      e.preventDefault();
      const teamA = document.getElementById('teamA').value.trim();
      const teamB = document.getElementById('teamB').value.trim();
      const date = document.getElementById('matchDate').value;
      const time = document.getElementById('matchTime').value;
      if (teamA && teamB && date && time) {
        fetch('/api/upcoming-matches', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ teamA, teamB, date, time })
        })
        .then(res => res.json())
        .then(() => {
          fetchUpcomingMatches();
          showNotification(`Match scheduled: ${teamA} vs ${teamB} on ${new Date(date + 'T' + time).toLocaleString([], { dateStyle: 'medium', timeStyle: 'short' })}`);
          document.getElementById('match-form').reset();
        })
        .catch(() => {
          showNotification('Failed to schedule match.');
        });
      }
    });

    // Simple calendar: show upcoming matches as a list
    function renderCalendar(matches) {
      const calendar = document.getElementById('calendar');
      if (!matches || matches.length === 0) {
        calendar.innerHTML = '<div class="text-muted">No upcoming matches.</div>';
        return;
      }
      calendar.innerHTML = '<ul class="list-unstyled mb-0">' +
        matches.map(m =>
          `<li><span class="badge badge-primary">${new Date(m.date).toLocaleDateString()}</span> ${m.teamA} vs ${m.teamB} <small>(${m.time})</small></li>`
        ).join('') +
        '</ul>';
    }

    // Notification system
    function showNotification(msg) {
      const notif = document.getElementById('notifications');
      notif.textContent = msg;
      notif.style.display = 'block';
      setTimeout(() => { notif.style.display = 'none'; }, 4000);
    }
    </script>
  
<!-- Footer -->
<footer class="site-footer border-top">
  <div class="container">
    <div class="row text-center text-lg-left">
      <div class="col-lg-4 mb-5 mb-lg-0 d-flex flex-column align-items-center align-items-lg-start">
        <div class="mb-4">
          <img src="../static/images/logofull.png" alt="Unstoppables CC Logo" style="max-width: 240px; width: 100%; height: auto;">
        </div>
        
      </div>
      <div class="col-lg-4 mb-5 mb-lg-0 d-flex flex-column align-items-center align-items-lg-start">
        <div class="row w-100 mb-4">
          <div class="col-12">
            <h3 class="footer-heading mb-4">QUICK MENU</h3>
          </div>
            <div class="col-6">
            <ul class="list-unstyled">
              <li><a href="/">HOME</a></li>
              <li><a href="gallery">GALLERY</a></li>
              <li><a href="squad">SQUAD</a></li>
              <li><a href="contact">CONTACT US</a></li>
            </ul>
            </div>
            <div class="col-6">
            <ul class="list-unstyled">
              <li><a href="about">ABOUT US</a></li>
              <li><a href="privacy-policy">PRIVACY POLICY</a></li>
              <li><a href="terms">TERMS OF USE</a></li>
              <li><a href="disclaimer">DISCLAIMER</a></li>
            </ul>
          </div>
        </div>
      </div>
      <div class="col-lg-4 d-flex flex-column align-items-center align-items-lg-start">
        <h3 class="footer-heading mb-4">FOLLOW US</h3>
        <div>
          <a href="#" class="pl-0 pr-3"><span class="icon-facebook"></span></a>
          <a href="#" class="pl-3 pr-3"><span class="icon-twitter"></span></a>
          <a href="#" class="pl-3 pr-3"><span class="icon-instagram"></span></a>
          <a href="#" class="pl-3 pr-3"><span class="icon-linkedin"></span></a>
        </div>
      </div>
    </div>
    <div class="row pt-5 mt-5 text-center">
      <div class="col-md-12">
        <p>
          &copy; Unstoppables CC. All rights reserved.<br>
          Designed by &mdash;
          <a href="https://kamaleshwaran11.github.io" target="_blank">Kamaleshwaran.S</a>
        </p>
      </div>
    </div>
  </div>
</footer>

</div>
<script src="../static/js/jquery-3.3.1.min.js"></script>
<script src="../static/js/jquery-migrate-3.0.1.min.js"></script>
<script src="../static/js/jquery-ui.js"></script>
<script src="../static/js/popper.min.js"></script>
<script src="../static/js/bootstrap.min.js"></script>
<script src="../static/js/owl.carousel.min.js"></script>
<script src="../static/js/jquery.stellar.min.js"></script>
<script src="../static/js/jquery.countdown.min.js"></script>
<script src="../static/js/jquery.magnific-popup.min.js"></script>
<script src="../static/js/aos.js"></script>
<script src="../static/js/main.js"></script>
<script>
// Hide preloader when page is fully loaded
//window.addEventListener('load', function() {
  //var preloader = document.getElementById('preloader');
  //if (preloader) preloader.style.display = 'none';
//});
</script>
</body>
</html>
